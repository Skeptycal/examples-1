machine:
  java:
    version: oraclejdk8
  environment:
    MAVEN_OPTS: -Xmx3200m
    PATH: "${PATH}:${HOME}/${CIRCLE_PROJECT_REPONAME}/node_modules/.bin"
  node:
    version: 9.4.0

dependencies:
  pre:
    - npm install serverless
    - which serverless

deployment:
  releases:
    branch: master
    commands:
      # Deploy Java project
      - cd java; mvn clean; mvn install -U; mvn package; serverless deploy
